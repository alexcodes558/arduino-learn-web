<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Arduino Coding Course</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  margin: 0;
  padding: 20px;
  line-height: 1.6;
}

h1 {
  color: #2c7dc9;
  text-align: center;
  margin-bottom: 30px;
}

.lesson-card {
  background: white;
  padding: 20px;
  border-radius: 10px;
  margin-bottom: 20px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.lesson-card h2 {
  margin-top: 0;
  color: #1e5fa3;
}

.lesson-card p {
  margin: 10px 0;
}

.lesson-card a {
  display: inline-block;
  text-decoration: none;
  color: white;
  background: #2c7dc9;
  padding: 10px 16px;
  border-radius: 6px;
  font-weight: bold;
  margin-top: 10px;
}

.lesson-card a:hover {
  background: #1e5fa3;
}

.progress {
  float: right;
  font-weight: bold;
  color: #2c7dc9;
}

.draggablePin { cursor: grab; }
.led { transition: opacity 0.3s; }
.resistor { cursor: pointer; }
</style>
</head>

<body>

<h1>Arduino Coding Course</h1>

<!-- LESSON CARDS -->
<div class="lesson-card">
  <h2>Lesson 1 – Digital Output</h2>
  <span class="progress" id="progress1">❌</span>
  <p>Learn to turn LEDs ON and OFF using digital pins.</p>
  <a href="lesson1.html">Open Lesson 1</a>
</div>

<div class="lesson-card">
  <h2>Lesson 2 – Variables & Pins</h2>
  <span class="progress" id="progress2">❌</span>
  <p>Understand variables and how pins work in code.</p>
  <a href="lesson2.html">Open Lesson 2</a>
</div>

<div class="lesson-card">
  <h2>Lesson 3 – Digital Input</h2>
  <span class="progress" id="progress3">❌</span>
  <p>Learn about buttons and reading digital input.</p>
  <a href="lesson3.html">Open Lesson 3</a>
</div>

<div class="lesson-card">
  <h2>Lesson 4 – PWM & LED Brightness</h2>
  <span class="progress" id="progress4">❌</span>
  <p>Learn how PWM controls LED brightness and pseudo-analog output.</p>
  <a href="lesson4.html">Open Lesson 4</a>
</div>

<div class="lesson-card">
  <h2>Lesson 5 – Analog Input</h2>
  <span class="progress" id="progress5">❌</span>
  <p>Learn how Arduino reads variable voltages from sensors and potentiometers.</p>
  <a href="lesson5.html">Open Lesson 5</a>
</div>

<!-- INTERACTIVE WIRING SIMULATOR -->
<div class="lesson-card" id="simulator">
  <h2>Arduino Wiring Simulator – Resistors & LEDs</h2>
  <p>Drag pins to breadboard holes, connect resistors, then connect LEDs to see them light.</p>

  <div id="board" style="position:relative; width:100%; height:350px; background:#e6f0f8; border-radius:12px; border:2px solid #2c7dc9;">
    
    <!-- Arduino SVG -->
    <svg id="arduino" viewBox="0 0 200 300" style="position:absolute; left:20px; top:30px; width:120px; height:180px;">
      <rect x="10" y="10" width="180" height="280" rx="20" fill="#1f6fa5" stroke="#000" stroke-width="2"/>
      <text x="100" y="25" fill="white" font-size="16" text-anchor="middle">Arduino UNO</text>
      <g id="arduinoPins">
        <circle cx="40" cy="60" r="8" fill="red" data-pin="13" class="draggablePin"/>
        <circle cx="70" cy="60" r="8" fill="red" data-pin="12" class="draggablePin"/>
        <circle cx="100" cy="60" r="8" fill="red" data-pin="11" class="draggablePin"/>
        <circle cx="130" cy="60" r="8" fill="red" data-pin="10" class="draggablePin"/>
      </g>
    </svg>

    <!-- Breadboard SVG -->
    <svg id="breadboard" viewBox="0 0 400 200" style="position:absolute; right:20px; top:30px; width:250px; height:180px;">
      <rect x="10" y="10" width="380" height="180" rx="10" fill="#fff" stroke="#ccc" stroke-width="2"/>
      <text x="200" y="25" font-size="14" text-anchor="middle">Breadboard</text>

      <!-- Holes -->
      <g id="holes">
        <circle cx="50" cy="60" r="6" fill="#ccc" data-hole="A1" class="droppableHole"/>
        <circle cx="100" cy="60" r="6" fill="#ccc" data-hole="A2" class="droppableHole"/>
        <circle cx="150" cy="60" r="6" fill="#ccc" data-hole="A3" class="droppableHole"/>
        <circle cx="200" cy="60" r="6" fill="#ccc" data-hole="A4" class="droppableHole"/>
        <circle cx="250" cy="60" r="6" fill="#ccc" data-hole="A5" class="droppableHole"/>
      </g>

      <!-- Resistors -->
      <g id="resistors">
        <rect x="60" y="100" width="40" height="8" fill="#ff9900" class="resistor" data-connected="false" />
        <rect x="160" y="100" width="40" height="8" fill="#ff9900" class="resistor" data-connected="false" />
      </g>
    </svg>

    <!-- LEDs -->
    <div id="leds" style="position:absolute; bottom:20px; left:50%; transform:translateX(-50%); display:flex; gap:20px;">
      <div class="led" data-pin="13" style="width:30px; height:30px; border-radius:50%; background:red; opacity:0.2;"></div>
      <div class="led" data-pin="12" style="width:30px; height:30px; border-radius:50%; background:red; opacity:0.2;"></div>
      <div class="led" data-pin="11" style="width:30px; height:30px; border-radius:50%; background:red; opacity:0.2;"></div>
      <div class="led" data-pin="10" style="width:30px; height:30px; border-radius:50%; background:red; opacity:0.2;"></div>
    </div>

  </div>
  <p>Drag a pin onto a resistor, then from resistor to LED hole. LED lights only if resistor is connected.</p>
</div>

<script>
// Progress indicators
const lessons = [1,2,3,4,5];
lessons.forEach(num => {
  if(localStorage.getItem(`lesson${num}Passed`) === "true") {
    document.getElementById(`progress${num}`).textContent = "✅";
  }
});

// Simulator logic
const pins = document.querySelectorAll('.draggablePin');
const holes = document.querySelectorAll('.droppableHole');
const leds = document.querySelectorAll('.led');
const resistors = document.querySelectorAll('.resistor');

let draggingPin = null;
pins.forEach(pin => pin.addEventListener('mousedown', startDrag));

function startDrag(e) {
  draggingPin = e.target;
  draggingPin.style.cursor = "grabbing";

  const move = (ev) => {
    draggingPin.setAttribute('cx', ev.offsetX);
    draggingPin.setAttribute('cy', ev.offsetY);
  }

  const stop = (ev) => {
    // Check if dropped on resistor
    resistors.forEach(res => {
      const rx = parseFloat(res.getAttribute('x')) + 20;
      const ry = parseFloat(res.getAttribute('y')) + 4;
      const dx = ev.offsetX - rx;
      const dy = ev.offsetY - ry;
      if(Math.sqrt(dx*dx + dy*dy) < 20){
        res.dataset.connected = draggingPin.dataset.pin;
      }
    });

    // Check if dropped on hole
    holes.forEach(hole => {
      const dx = ev.offsetX - hole.getAttribute('cx');
      const dy = ev.offsetY - hole.getAttribute('cy');
      if(Math.sqrt(dx*dx + dy*dy) < 12){
        const matchingResistor = Array.from(resistors).some(r => r.dataset.connected === draggingPin.dataset.pin);
        if(matchingResistor){
          hole.dataset.connectedPin = draggingPin.dataset.pin;
        }
      }
    });

    updateLEDs();
    window.removeEventListener('mousemove', move);
    window.removeEventListener('mouseup', stop);
    draggingPin.style.cursor = "grab";
    draggingPin = null;
  }

  window.addEventListener('mousemove', move);
  window.addEventListener('mouseup', stop);
}

function updateLEDs(){
  leds.forEach(led => {
    const connected = Array.from(holes).some(h => h.dataset.connectedPin == led.dataset.pin);
    led.style.opacity = connected ? 1 : 0.2;
  });
}
</script>

</body>
</html>
