<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Lesson 6 – Tinkercad Style</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f2f2f2;
}

.topbar {
  background: #1e1e1e;
  color: white;
  padding: 10px 16px;
  font-weight: bold;
}

.workspace {
  display: flex;
  flex-wrap: wrap;
}

.board-area {
  flex: 1;
  min-width: 320px;
  padding: 16px;
}

.code-area {
  flex: 1;
  min-width: 320px;
  padding: 16px;
  background: #fff;
  border-left: 3px solid #ccc;
}

.arduino {
  background: #2c7dc9;
  color: white;
  padding: 14px;
  border-radius: 12px;
  margin-bottom: 20px;
}

.breadboard {
  background: #eee;
  padding: 14px;
  border-radius: 12px;
  border: 2px solid #ccc;
}

.component {
  margin: 10px 0;
}

.led {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: #555;
  margin: auto;
  border: 2px solid #222;
}

.led.on {
  background: red;
  box-shadow: 0 0 15px red;
}

.wire {
  display: inline-block;
  padding: 8px;
  background: orange;
  border-radius: 6px;
  margin: 6px;
  cursor: grab;
}

.sensor {
  margin-top: 16px;
}

textarea {
  width: 100%;
  height: 160px;
  font-family: monospace;
}

button {
  width: 100%;
  padding: 12px;
  margin-top: 10px;
  font-size: 16px;
  background: #2c7dc9;
  color: white;
  border: none;
  border-radius: 6px;
}

.status {
  margin-top: 10px;
  font-weight: bold;
}
</style>
</head>

<body>

<div class="topbar">
  Arduino Simulator (Tinkercad-Style)
</div>

<div class="workspace">

  <!-- LEFT: BOARD -->
  <div class="board-area">

    <div class="arduino">
      Arduino UNO
      <div class="wire" draggable="true" data-pin="A0">A0 Wire</div>
    </div>

    <div class="breadboard">
      <h3>Breadboard</h3>

      <div class="component">
        LED (D3)
        <div class="led" id="led"></div>
      </div>

      <div class="sensor">
        <label>Sensor (A0):</label><br>
        <input type="range" id="sensor" min="0" max="1023" value="200">
        <span id="sensorValue">200</span>
      </div>
    </div>

    <div class="status" id="status">
      No wire connected
    </div>

  </div>

  <!-- RIGHT: CODE -->
  <div class="code-area">
    <h3>Arduino Code</h3>

<textarea id="code">
int value = analogRead(A0);

if (value > 500) {
  digitalWrite(3, HIGH);
} else {
  digitalWrite(3, LOW);
}
</textarea>

    <button onclick="run()">Start Simulation</button>

    <br><br>
    <a href="lesson5.html">← Lesson 5</a> |
    <a href="index.html">Home</a>
  </div>

</div>

<script>
let wired = false;
const led = document.getElementById("led");
const sensor = document.getElementById("sensor");
const sensorValue = document.getElementById("sensorValue");
const status = document.getElementById("status");

sensor.oninput = () => {
  sensorValue.textContent = sensor.value;
};

document.querySelector(".wire").addEventListener("dragstart", e => {
  e.dataTransfer.setData("pin", "A0");
});

led.addEventListener("dragover", e => e.preventDefault());

led.addEventListener("drop", e => {
  e.preventDefault();
  wired = true;
  status.textContent = "Sensor wired to A0";
});

function run() {
  if (!wired) {
    alert("Connect A0 to the LED first!");
    return;
  }

  const code = document.getElementById("code").value;
  const val = parseInt(sensor.value);

  const match = code.match(/value\s*>\s*(\d+)/);
  if (!match) {
    alert("Missing condition: value > ?");
    return;
  }

  const threshold = parseInt(match[1]);

  if (val > threshold) {
    led.classList.add("on");
    status.textContent = "LED ON (sensor=" + val + ")";
  } else {
    led.classList.remove("on");
    status.textContent = "LED OFF (sensor=" + val + ")";
  }
}
</script>

</body>
</html>
